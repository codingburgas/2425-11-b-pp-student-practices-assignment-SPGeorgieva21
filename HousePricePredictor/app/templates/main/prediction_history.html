{% extends 'base.html' %}
{% block title %}–ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ç–µ{% endblock %}
{% block content %}
<div class="history-container">
    <div class="history-header">
        <h1 class="history-title">–ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ç–µ</h1>
    </div>

    {% if predictions %}
    <div class="predictions-grid">
        {% for prediction in predictions %}
        <div class="prediction-card">
            <div class="prediction-header">
                <div class="prediction-number">–ü—Ä–æ–≥–Ω–æ–∑–∞ #{{ loop.index }}</div>
                <div class="prediction-date">{{ prediction.timestamp.strftime('%d.%m.%Y %H:%M') if prediction.timestamp else 'N/A' }}</div>
            </div>
            <div class="prediction-content">
                <div class="prediction-details">
                    <div class="detail-item"><span class="detail-label">–ü–ª–æ—â:</span><span class="detail-value">{{ prediction.area or 'N/A' }} –º¬≤</span></div>
                    <div class="detail-item"><span class="detail-label">–°—Ç–∞–∏:</span><span class="detail-value">{{ prediction.rooms or 'N/A' }}</span></div>
                    <div class="detail-item"><span class="detail-label">–†–∞–π–æ–Ω:</span><span class="detail-value">{{ prediction.neighborhood or 'N/A' }}</span></div>
                    <div class="detail-item"><span class="detail-label">–ï—Ç–∞–∂:</span><span class="detail-value">{{ prediction.floor or 'N/A' }}</span></div>
                </div>
                <div class="prediction-result">{{ "‚Ç¨{:,.0f}".format(prediction.result) if prediction.result else 'N/A' }}</div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="no-predictions">
        <div class="no-predictions-icon">üìä</div>
        <h3>–í—Å–µ –æ—â–µ –Ω—è–º–∞—Ç–µ –Ω–∞–ø—Ä–∞–≤–µ–Ω–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏</h3>
        <p>–ó–∞–ø–æ—á–Ω–µ—Ç–µ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ –Ω–∞—à–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∑–∞ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–∞–Ω–µ –Ω–∞ —Ü–µ–Ω–∏ –Ω–∞ –∏–º–æ—Ç–∏.</p>
        <a href="{{ url_for('ai.predict') }}" class="cta-button">–ù–∞–ø—Ä–∞–≤–µ—Ç–µ –ø—Ä–æ–≥–Ω–æ–∑–∞</a>
    </div>
    {% endif %}

    {% if others_predictions %}
    <hr class="my-5">
    <h3 class="mb-3">–ü—Ä–æ–≥–Ω–æ–∑–∏ –æ—Ç –¥—Ä—É–≥–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</h3>
    <div class="predictions-grid">
        {% for prediction in others_predictions %}
        <div class="prediction-card">
            <div class="prediction-header">
                <div class="prediction-number">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª: {{ prediction.user.username }}</div>
                <div class="prediction-date">{{ prediction.timestamp.strftime('%d.%m.%Y %H:%M') }}</div>
            </div>
            <div class="prediction-content">
                <div class="prediction-details">
                    <div class="detail-item"><span class="detail-label">–ü–ª–æ—â:</span><span class="detail-value">{{ prediction.area }} –º¬≤</span></div>
                    <div class="detail-item"><span class="detail-label">–°—Ç–∞–∏:</span><span class="detail-value">{{ prediction.rooms }}</span></div>
                    <div class="detail-item"><span class="detail-label">–†–∞–π–æ–Ω:</span><span class="detail-value">{{ prediction.neighborhood }}</span></div>
                    <div class="detail-item"><span class="detail-label">–ï—Ç–∞–∂:</span><span class="detail-value">{{ prediction.floor }}</span></div>
                </div>
                <div class="prediction-result">{{ "‚Ç¨{:,.0f}".format(prediction.result) }}</div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock %}
