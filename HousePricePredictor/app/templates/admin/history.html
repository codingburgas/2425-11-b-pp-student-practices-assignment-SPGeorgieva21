{% extends 'base.html' %}
{% block title %}–ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –≤—Å–∏—á–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏{% endblock %}
{% block content %}
<div class="history-container">
    <div class="history-header">
        <h1 class="history-title">–ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –≤—Å–∏—á–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏</h1>
    </div>

    {% if predictions %}
    <div class="predictions-grid">
        {% for prediction in predictions %}
        <div class="prediction-card">
            <div class="prediction-header">
                <div class="prediction-number">–ü—Ä–æ–≥–Ω–æ–∑–∞ #{{ loop.index }}</div>
                <div class="prediction-date">{{ prediction.timestamp.strftime('%d.%m.%Y %H:%M') if prediction.timestamp else 'N/A' }}</div>
            </div>
            <div class="prediction-content">
                <div class="prediction-details">
                    <div class="detail-item">
                        <span class="detail-label">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª:</span>
                        <span class="detail-value">{{ prediction.user.username if prediction.user else '–ù–µ–∏–∑–≤–µ—Å—Ç–µ–Ω' }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">–ü–ª–æ—â:</span>
                        <span class="detail-value">{{ prediction.area or 'N/A' }} –º¬≤</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">–°—Ç–∞–∏:</span>
                        <span class="detail-value">{{ prediction.rooms or 'N/A' }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">–ì—Ä–∞–¥:</span>
                        <span class="detail-value">{{ prediction.city or 'N/A' }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">–û–±–∑–∞–≤–µ–¥–µ–Ω:</span>
                        <span class="detail-value">{{ '–î–∞' if prediction.furnished else '–ù–µ' }}</span>
                    </div>
                </div>
                <div class="prediction-result">
                    {{ "‚Ç¨{:,.0f}".format(prediction.result) if prediction.result else 'N/A' }}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="no-predictions">
        <div class="no-predictions-icon">üìä</div>
        <h3>–í—Å–µ –æ—â–µ –Ω—è–º–∞ –Ω–∞–ø—Ä–∞–≤–µ–Ω–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏ –æ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</h3>
    </div>
    {% endif %}
</div>
{% endblock %}
